<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
<title>I&#39;m defined</title>
<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/style.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CRS2BQJ19C"></script>

<script defer>
  hljs.highlightAll();

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CRS2BQJ19C');
</script>

<meta name="generator" content="Hexo 8.0.0"></head>
<body>
    <header>
<nav>
    <div class="blog-name">
        <a href="/">I'm Defined</a>
    </div>
    <div class="blog-nav">
        <a href="/">首頁</a>
        <a href="/about/">關於我</a>
        <a href="/archives/">文章列表</a>
    </div>
</nav>
</header>
    <main>
        <article class="post-article">
    <header class="post-header">
        <div class="post-meta">
            <span>更新日期：2025-10-26</span>
        </div>
        <h1>Snippy 開發日誌 Day 2</h1>
        <div class="post-content">
            <h2 id="前言">前言</h2>
<p>在刷 Threads 的時候看到「一致性原則（P則Q，非Q則非P）」，所以就加進專案了。<br>
因為有 AI 所以可以衝很快，但也不好衝太快。然後要一直跟他重複對話也很煩，所以寫進 README.md 了，原來這是規格驅動嗎？<br>
然後第一次使用 TypeScript 型別檢查，雖然不檢查也能跑動，卻發現認真檢視會有新發現，紅色波浪線應該消失吧？</p>
<span id="more"></span>
<p>參考：<a href="posts/20251019220554">Snippy 開發日誌 Day 1</a><br>
GitHub：<a target="_blank" rel="noopener" href="https://github.com/Qiu1996/snippy">qiu1996/snippy</a></p>
<h2 id="重構-Electron-主程序">重構 Electron 主程序</h2>
<ul>
<li>使用 <code>ES Modules</code> 語法，將 <code>require</code> 改成 <code>import</code> 語法。
<ul>
<li>這是這專案目前漏掉的語法，應該改成現在 JS 官方標準 <code>ES Modules</code>。</li>
</ul>
</li>
<li>將 <code>window</code> 的配置抽成常數 <code>WINDOW_CONFIG</code>。
<ul>
<li>這樣可以比較明確的知道這是配置，也不用進函式去找。</li>
</ul>
</li>
<li>新增開發環境判斷 <code>isDev</code> 。
<ul>
<li>就是一個開關，判斷現在是開發還是生產，方邊後續切換。</li>
</ul>
</li>
<li>刪掉一些沒必要的生命週期函式
<ul>
<li>像是判斷電腦系統的就沒必要，因為現在只是我自己在用，就MacOS系統而已。</li>
<li>還有<code>app.on('activate')</code>也沒必要存在。</li>
</ul>
</li>
<li>TypeScript 配置要對應打包工具的行為，所以 tsconfig.json要改：
<ul>
<li><code>&quot;module&quot;: &quot;ESNext&quot;</code>：TypeScript 編譯後保持 import/export 語法</li>
<li><code>&quot;moduleResolution&quot;: &quot;bundler&quot;</code>：“bundler” = 給 Vite/Webpack 等打包工具用</li>
</ul>
</li>
</ul>
<h2 id="組件目錄重構">組件目錄重構</h2>
<ul>
<li>將組件分類至 <code>layout/</code>、<code>editor/</code>、<code>ui/</code> 目錄</li>
</ul>
<h2 id="README-更新">README 更新</h2>
<ul>
<li>加入開發指引（資料儲存策略、不接後端資料庫）</li>
<li>加入給 Claude Code 的指令</li>
<li>加入程式碼風格指引（P則Q，非Q則非P）</li>
<li><strong>這是用來驅動 AI 行為，避免每次打開專案都要再重複對話。</strong></li>
</ul>
<h2 id="實作新增分頁">實作新增分頁</h2>
<ul>
<li>隱藏原生視窗的標題（<code>titleBarStyle: 'hiddenInset'</code>）
<ul>
<li>為了隱藏MacOS原生視窗，然後另外客製化自己的視窗。</li>
<li>使用這個參數，紅綠燈還會自己往下。</li>
</ul>
</li>
<li>建立 <code>TopBar</code> 和 <code>TabItem</code> 組件</li>
<li>實作 <code>TabItem</code> 過多會觸發橫向捲動，並隱藏捲軸。
<ul>
<li>避免分頁太多導致破版。</li>
</ul>
</li>
<li>使用狀態提升 + Props 傳遞模式，實作動態新增分頁
<ul>
<li>因為對 Vue 組件之間的通訊算不上理解，先用最簡單的方式處理，後面再擴增，或是換處理方式。</li>
<li>其他方法還有 <code>Provide/Inject</code> 跟 <code>Pinia</code></li>
</ul>
</li>
</ul>
<h2 id="使用的-TypeScript-型別定義">使用的 TypeScript 型別定義</h2>
<ul>
<li><code>electron/main.ts</code> - <code>titleBarStyle: 'hiddenInset' as const</code> 確保字面型別</li>
<li><code>app.vue</code> - <code>interface Tab { id: number; title: string }</code>、<code>ref&lt;Tab[]&gt;</code> 陣列型別</li>
<li><code>TopBar.vue</code> - <code>defineProps&lt;{ tabs: Tab[] }&gt;()</code> props 型別定義</li>
<li><code>CodeEditor.vue</code> - <code>ref&lt;HTMLDivElement | null&gt;</code> DOM 元素型別</li>
<li><code>MarkdownEditor.vue</code> - <code>ref&lt;HTMLDivElement | null&gt;</code> DOM 元素型別</li>
</ul>

        </div>
    </header>
</article>
    </main>
    <footer>
        <div>
    <p>
        &copy; 2025 Qiu | Powered by Hexo
    </p>
</div>
    </footer>
</body>
</html>